---
- name: Check, if Go installation catalog exists
  stat:
    path: /usr/local/go
  register: go_dir
- name: Download Go
  get_url:
    url: '{{ golang_url }}'
    dest: /tmp/go.tar.gz
    sha256sum: '{{ golang_sha256_checksum }}'
  when: not go_dir.stat.exists
- name: Unpack Go
  unarchive:
    src: /tmp/go.tar.gz
    dest: /usr/local
  when: not go_dir.stat.exists
- name: Remove Go archive
  file:
    state: absent
    path: /tmp/go.tar.gz
