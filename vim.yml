---
- name: Setup vim configuration
  template:
    src: vimrc.j2
    dest: '{{ansible_user_dir}}/.vimrc'
    owner: '{{ansible_user_uid}}'
    group: '{{ansible_user_gid}}'
    mode: 0644
- name: Create vim catalogs
  file:
    path: '{{item}}'
    owner: '{{ansible_user_uid}}'
    group: '{{ansible_user_gid}}'
    mode: 0755
    state: directory
  with_items:
    - '{{ansible_user_dir}}/.vim'
    - '{{ansible_user_dir}}/.vim/ftplugin'
    - '{{ansible_user_dir}}/.vim/bundle'
- name: Install Vundle
  git:
    dest: '{{ansible_user_dir}}/.vim/bundle/Vundle.vim'
    repo: https://github.com/VundleVim/Vundle.vim.git
    version: v0.10.2
    depth: 1
- name: Setup ftplugin customisations
  copy:
    src: '{{item}}'
    dest: '{{ansible_user_dir}}/.vim/ftplugin/'
    owner: '{{ansible_user_uid}}'
    group: '{{ansible_user_gid}}'
    mode: 0644
  with_fileglob:
    - files/ftplugin/*
